<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="product_template_form_view_cost_price" model="ir.ui.view">
			<field name="name">product.template.form.inherit</field>
			<field name="model">product.template</field>
			<field name="inherit_id" ref="product.product_template_form_view" />
			<field name="arch" type="xml">
				<xpath expr="//label[@for='standard_price']" position="attributes">
					<attribute name='groups'>cost_price.group_product_cost_price
					</attribute>
				</xpath>
				<xpath expr="//div[@name='standard_price_uom']" position="attributes">
					<attribute name='groups'>cost_price.group_product_cost_price
					</attribute>
				</xpath>
			</field>
		</record>
		<record id="product_template_tree_view_cost_price" model="ir.ui.view">
			<field name="name">product.template.product.tree</field>
			<field name="model">product.template</field>
			<field name="inherit_id" ref="product.product_template_tree_view" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='standard_price']" position="replace">
                <field name="standard_price" groups="cost_price.group_product_cost_price"/>
				</xpath>
			</field>
		</record>

		<record id="stock_account.product_variant_easy_edit_view_inherit"
			model="ir.ui.view">
			<field name="name">product.product.product.view.form.easy.inherit
			</field>
			<field name="model">product.product</field>
			<field name="inherit_id" ref="product.product_variant_easy_edit_view" />
			<field name="arch" type="xml">
				<data>
					<field name="standard_price" position="after">
						<field name="valuation" invisible="1" />
						<field name="cost_method" invisible="1" />
					</field>
					<field name="standard_price" position="after">
						<button string="Set standard price" type="action"
							name="%(stock_account.action_view_change_standard_price)d"
							attrs="{'invisible':['|',('valuation','!=', 'real_time'), ('cost_method', 'not in', ['standard'])]}"
							class="oe_link oe_read_only" colspan="2"
							groups="cost_price.group_product_cost_price" />
					</field>
					<field name="standard_price" position="after">
						<button string="Set standard price" type="action"
							name="%(stock_account.action_view_change_standard_price)d"
							attrs="{'invisible':['|',('valuation','!=', 'real_time'), ('cost_method', 'not in', ['average'])]}"
							class="oe_link oe_read_only" colspan="2"
							groups="cost_price.group_product_cost_price" />
					</field>
				</data>
			</field>
		</record>


		<record id="stock_account.view_template_property_form" model="ir.ui.view">
			<field name="name">product.template.stock.property.form.inherit
			</field>
			<field name="model">product.template</field>
			<field name="inherit_id" ref="product.product_template_form_view" />
			<field name="arch" type="xml">
				<data>
					<field name="list_price" position="after">
						<field name="valuation" invisible="1" readonly="1" />
						<field name="cost_method" invisible="1" readonly="1" />
						<field name="property_cost_method" groups="stock_account.group_inventory_valuation"
							invisible="1" />
					</field>
					<field name="standard_price" position="replace">
						<field name="standard_price"
							attrs="{'readonly':['&amp;', ('valuation','=','real_time'), ('cost_method', 'in', ['standard', 'average'])]}"
							class="oe_inline" widget='monetary' options="{'currency_field': 'currency_id'}" />
					</field>
					<div name="standard_price_uom" position="after">
						<button string="Set standard price" type="action"
							name="%(stock_account.action_view_change_standard_price)d"
							attrs="{'invisible':['|', '|', ('valuation','!=', 'real_time'), ('cost_method', 'not in', ['standard']), ('product_variant_count', '>', 1)]}"
							class="oe_link oe_read_only" colspan="2"
							groups="cost_price.group_product_cost_price" />
					</div>
					<div name="standard_price_uom" position="after">
						<button string="Set standard price" type="action"
							name="%(stock_account.action_view_change_standard_price)d"
							attrs="{'invisible':['|', '|', ('valuation','!=', 'real_time'), ('cost_method', 'not in', ['average']), ('product_variant_count', '>', 1)]}"
							class="oe_link oe_read_only" colspan="2"
							groups="cost_price.group_product_cost_price" />
					</div>
					<group name="accounting" position="inside">
						<group name="property_inventory_valuation" groups="stock_account.group_inventory_valuation"
							attrs="{'invisible': [('type','=','service')]}">
							<field name="property_valuation" invisible="1" />
							<field name="property_stock_account_input"
								attrs="{'invisible':[ ('valuation', '!=', 'real_time')]}"
								domain="[('deprecated', '=', False)]" />
							<field name="property_stock_account_output"
								attrs="{'invisible':[ ('valuation', '!=', 'real_time')]}"
								domain="[('deprecated', '=', False)]" />
						</group>
					</group>
				</data>
			</field>
		</record>
	</data>
</odoo>